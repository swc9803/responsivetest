<template>
  <nav>
    <ul>
      <svg class="symbol"
        xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 106 58">
        <g id="symbol">
          <rect id="symbolLine" width="104" height="17" x="1" y="40" fill="#FFFB9D" rx="3"/>
          <g id="symbolText" filter="url(#symbol_d_40_7)">
            <mask id="path-2-outside-1_40_7" width="104" height="54" x="1" y="0" fill="#000" maskUnits="userSpaceOnUse">
              <path fill="#fff" d="M1 0h104v54H1z"/>
              <path d="M12.4 23.7c-3-1.2-5.2-2.7-6.5-4.5a11 11 0 0 1-2-6.8c0-3 .8-5.5 2.4-7.4 1.7-2 3.9-3 6.5-3 1.9 0 3.5.5 4.9 1.5C19 4.5 20.2 6 21 7.7c.6 1.3 1 2.7 1 4.1.2 1-.6 1.8-1.6 1.8s-1.7-.8-1.8-1.8A7.5 7.5 0 0 0 17 8.2c-1-1.4-2.4-2-4.3-2a5 5 0 0 0-4 1.6c-1 1.1-1.4 2.6-1.4 4.6a6 6 0 0 0 1.3 4c1 1 2.5 2 4.7 2.9 2.2.9 4 1.9 5.2 3 1.2 1 2.1 2.3 2.7 3.7a13 13 0 0 1 1 5c0 3.2-.9 5.7-2.6 7.5a8.6 8.6 0 0 1-6.7 2.8c-1.8 0-3.5-.5-5-1.5-1.6-1-2.9-2.4-3.7-4.1-.6-1.3-1-2.7-1.2-4.2-.1-1 .7-1.8 1.7-1.8s1.7.8 1.8 1.8c.3 1.5.8 2.7 1.7 3.7a6 6 0 0 0 4.7 2c1.9 0 3.3-.5 4.3-1.6s1.4-2.6 1.4-4.5c0-1.8-.4-3.3-1.3-4.3-1-1-2.6-2-5-3ZM38.4 40.2c0-.6-1-1-1.4-.5a6.2 6.2 0 0 1-4.4 1.6c-2.1 0-3.7-.8-4.8-2.6-1.1-1.8-1.7-4.4-1.7-7.8V14c0-.9.8-1.6 1.7-1.6 1 0 1.7.7 1.7 1.6v16.7c0 4.3 1.2 6.5 3.6 6.5 1.7 0 3-.6 4-1.8 1-1.4 1.1-3.3 1.1-5V14c0-.9.8-1.6 1.7-1.6 1 0 1.7.7 1.7 1.6v25.2c0 .9-.7 1.6-1.6 1.6h-1a.6.6 0 0 1-.6-.6ZM49.2 12.4c.4 0 .7.3.7.7 0 .8 1.2 1.1 1.8.6a5.8 5.8 0 0 1 4.2-1.9c4.2 0 6.3 3.4 6.3 10.2v17.1c0 1-.7 1.7-1.7 1.7-.9 0-1.7-.8-1.7-1.7V22c0-2-.3-3.6-1-4.6-.6-1-1.6-1.4-2.9-1.4-1 0-2 .4-2.9 1.2a7 7 0 0 0-.6.8c-1.1 1.5-1.3 3.5-1.3 5.4V39c0 1-.8 1.7-1.7 1.7-1 0-1.7-.8-1.7-1.7V14c0-1 .8-1.6 1.7-1.6h.8ZM66.5 26.3c0-4.4.7-8 2.1-10.5 1.4-2.7 3.3-4 5.6-4 1.7 0 3 .6 4.2 1.7.5.5 1.6.2 1.6-.5 0-.3.3-.6.7-.6h.8c.9 0 1.6.7 1.6 1.5v26.2c0 3.7-.8 6.6-2.3 8.7a7 7 0 0 1-6 3.2 8.3 8.3 0 0 1-6.9-4.2c-.3-.4-.3-1 0-1.4.6-1 2-1 2.8-.1a5.1 5.1 0 0 0 3.8 1.7c1.7 0 3-.6 3.8-2 1-1.3 1.4-3.2 1.4-5.6 0-.7-1-1-1.5-.5a5.8 5.8 0 0 1-4 1.4c-2.3 0-4.2-1.3-5.6-4a23.6 23.6 0 0 1-2.1-11Zm3.4.6c0 3.2.4 5.7 1.3 7.6 1 1.8 2.2 2.7 3.8 2.7h.5c4.1-.4 4.2-6.3 4.2-10.5 0-4.4-.3-10.7-4.6-10.7-1.7 0-3 .9-3.9 2.7-.9 1.9-1.3 4.6-1.3 8.2ZM99.6 33.3c0-1.4-.3-2.4-1-3a8.1 8.1 0 0 0-3.6-2c-1.7-.5-3-1.1-4-1.9a7 7 0 0 1-3-6.2c0-2.4.7-4.3 2-6a6.6 6.6 0 0 1 5.3-2.4c2.2 0 4 .9 5.4 2.5a9 9 0 0 1 2 4.7c.1 1-.6 1.7-1.6 1.7s-1.6-.8-1.9-1.7c-.2-.6-.5-1.2-1-1.7-.7-1-1.7-1.5-2.9-1.5s-2.2.4-2.9 1.2c-.7.8-1 1.8-1 3s.3 2 1 2.7c.6.6 1.8 1.1 3.4 1.7 1.7.5 3 1.2 4.1 2a7 7 0 0 1 2.3 2.7c.5 1 .8 2.3.8 3.8 0 2.6-.7 4.6-2.1 6.1a7.1 7.1 0 0 1-5.5 2.3c-1.6 0-3-.4-4.2-1.2-1.2-.8-2.1-2-2.8-3.3-.5-1-.8-2-1-3 0-1 .7-1.8 1.7-1.8.9 0 1.6.8 1.8 1.7.3.9.6 1.6 1.2 2.2.8 1 2 1.5 3.3 1.5 1.3 0 2.3-.4 3-1.1a4 4 0 0 0 1.2-3Z"/>
            </mask>
            <path fill="#fff" d="M12.4 23.7c-3-1.2-5.2-2.7-6.5-4.5a11 11 0 0 1-2-6.8c0-3 .8-5.5 2.4-7.4 1.7-2 3.9-3 6.5-3 1.9 0 3.5.5 4.9 1.5C19 4.5 20.2 6 21 7.7c.6 1.3 1 2.7 1 4.1.2 1-.6 1.8-1.6 1.8s-1.7-.8-1.8-1.8A7.5 7.5 0 0 0 17 8.2c-1-1.4-2.4-2-4.3-2a5 5 0 0 0-4 1.6c-1 1.1-1.4 2.6-1.4 4.6a6 6 0 0 0 1.3 4c1 1 2.5 2 4.7 2.9 2.2.9 4 1.9 5.2 3 1.2 1 2.1 2.3 2.7 3.7a13 13 0 0 1 1 5c0 3.2-.9 5.7-2.6 7.5a8.6 8.6 0 0 1-6.7 2.8c-1.8 0-3.5-.5-5-1.5-1.6-1-2.9-2.4-3.7-4.1-.6-1.3-1-2.7-1.2-4.2-.1-1 .7-1.8 1.7-1.8s1.7.8 1.8 1.8c.3 1.5.8 2.7 1.7 3.7a6 6 0 0 0 4.7 2c1.9 0 3.3-.5 4.3-1.6s1.4-2.6 1.4-4.5c0-1.8-.4-3.3-1.3-4.3-1-1-2.6-2-5-3ZM38.4 40.2c0-.6-1-1-1.4-.5a6.2 6.2 0 0 1-4.4 1.6c-2.1 0-3.7-.8-4.8-2.6-1.1-1.8-1.7-4.4-1.7-7.8V14c0-.9.8-1.6 1.7-1.6 1 0 1.7.7 1.7 1.6v16.7c0 4.3 1.2 6.5 3.6 6.5 1.7 0 3-.6 4-1.8 1-1.4 1.1-3.3 1.1-5V14c0-.9.8-1.6 1.7-1.6 1 0 1.7.7 1.7 1.6v25.2c0 .9-.7 1.6-1.6 1.6h-1a.6.6 0 0 1-.6-.6ZM49.2 12.4c.4 0 .7.3.7.7 0 .8 1.2 1.1 1.8.6a5.8 5.8 0 0 1 4.2-1.9c4.2 0 6.3 3.4 6.3 10.2v17.1c0 1-.7 1.7-1.7 1.7-.9 0-1.7-.8-1.7-1.7V22c0-2-.3-3.6-1-4.6-.6-1-1.6-1.4-2.9-1.4-1 0-2 .4-2.9 1.2a7 7 0 0 0-.6.8c-1.1 1.5-1.3 3.5-1.3 5.4V39c0 1-.8 1.7-1.7 1.7-1 0-1.7-.8-1.7-1.7V14c0-1 .8-1.6 1.7-1.6h.8ZM66.5 26.3c0-4.4.7-8 2.1-10.5 1.4-2.7 3.3-4 5.6-4 1.7 0 3 .6 4.2 1.7.5.5 1.6.2 1.6-.5 0-.3.3-.6.7-.6h.8c.9 0 1.6.7 1.6 1.5v26.2c0 3.7-.8 6.6-2.3 8.7a7 7 0 0 1-6 3.2 8.3 8.3 0 0 1-6.9-4.2c-.3-.4-.3-1 0-1.4.6-1 2-1 2.8-.1a5.1 5.1 0 0 0 3.8 1.7c1.7 0 3-.6 3.8-2 1-1.3 1.4-3.2 1.4-5.6 0-.7-1-1-1.5-.5a5.8 5.8 0 0 1-4 1.4c-2.3 0-4.2-1.3-5.6-4a23.6 23.6 0 0 1-2.1-11Zm3.4.6c0 3.2.4 5.7 1.3 7.6 1 1.8 2.2 2.7 3.8 2.7h.5c4.1-.4 4.2-6.3 4.2-10.5 0-4.4-.3-10.7-4.6-10.7-1.7 0-3 .9-3.9 2.7-.9 1.9-1.3 4.6-1.3 8.2ZM99.6 33.3c0-1.4-.3-2.4-1-3a8.1 8.1 0 0 0-3.6-2c-1.7-.5-3-1.1-4-1.9a7 7 0 0 1-3-6.2c0-2.4.7-4.3 2-6a6.6 6.6 0 0 1 5.3-2.4c2.2 0 4 .9 5.4 2.5a9 9 0 0 1 2 4.7c.1 1-.6 1.7-1.6 1.7s-1.6-.8-1.9-1.7c-.2-.6-.5-1.2-1-1.7-.7-1-1.7-1.5-2.9-1.5s-2.2.4-2.9 1.2c-.7.8-1 1.8-1 3s.3 2 1 2.7c.6.6 1.8 1.1 3.4 1.7 1.7.5 3 1.2 4.1 2a7 7 0 0 1 2.3 2.7c.5 1 .8 2.3.8 3.8 0 2.6-.7 4.6-2.1 6.1a7.1 7.1 0 0 1-5.5 2.3c-1.6 0-3-.4-4.2-1.2-1.2-.8-2.1-2-2.8-3.3-.5-1-.8-2-1-3 0-1 .7-1.8 1.7-1.8.9 0 1.6.8 1.8 1.7.3.9.6 1.6 1.2 2.2.8 1 2 1.5 3.3 1.5 1.3 0 2.3-.4 3-1.1a4 4 0 0 0 1.2-3Z"/>
            <path stroke="#3E4043" stroke-width="4" d="M12.4 23.7c-3-1.2-5.2-2.7-6.5-4.5a11 11 0 0 1-2-6.8c0-3 .8-5.5 2.4-7.4 1.7-2 3.9-3 6.5-3 1.9 0 3.5.5 4.9 1.5C19 4.5 20.2 6 21 7.7c.6 1.3 1 2.7 1 4.1.2 1-.6 1.8-1.6 1.8s-1.7-.8-1.8-1.8A7.5 7.5 0 0 0 17 8.2c-1-1.4-2.4-2-4.3-2a5 5 0 0 0-4 1.6c-1 1.1-1.4 2.6-1.4 4.6a6 6 0 0 0 1.3 4c1 1 2.5 2 4.7 2.9 2.2.9 4 1.9 5.2 3 1.2 1 2.1 2.3 2.7 3.7a13 13 0 0 1 1 5c0 3.2-.9 5.7-2.6 7.5a8.6 8.6 0 0 1-6.7 2.8c-1.8 0-3.5-.5-5-1.5-1.6-1-2.9-2.4-3.7-4.1-.6-1.3-1-2.7-1.2-4.2-.1-1 .7-1.8 1.7-1.8s1.7.8 1.8 1.8c.3 1.5.8 2.7 1.7 3.7a6 6 0 0 0 4.7 2c1.9 0 3.3-.5 4.3-1.6s1.4-2.6 1.4-4.5c0-1.8-.4-3.3-1.3-4.3-1-1-2.6-2-5-3ZM38.4 40.2c0-.6-1-1-1.4-.5a6.2 6.2 0 0 1-4.4 1.6c-2.1 0-3.7-.8-4.8-2.6-1.1-1.8-1.7-4.4-1.7-7.8V14c0-.9.8-1.6 1.7-1.6 1 0 1.7.7 1.7 1.6v16.7c0 4.3 1.2 6.5 3.6 6.5 1.7 0 3-.6 4-1.8 1-1.4 1.1-3.3 1.1-5V14c0-.9.8-1.6 1.7-1.6 1 0 1.7.7 1.7 1.6v25.2c0 .9-.7 1.6-1.6 1.6h-1a.6.6 0 0 1-.6-.6ZM49.2 12.4c.4 0 .7.3.7.7 0 .8 1.2 1.1 1.8.6a5.8 5.8 0 0 1 4.2-1.9c4.2 0 6.3 3.4 6.3 10.2v17.1c0 1-.7 1.7-1.7 1.7-.9 0-1.7-.8-1.7-1.7V22c0-2-.3-3.6-1-4.6-.6-1-1.6-1.4-2.9-1.4-1 0-2 .4-2.9 1.2a7 7 0 0 0-.6.8c-1.1 1.5-1.3 3.5-1.3 5.4V39c0 1-.8 1.7-1.7 1.7-1 0-1.7-.8-1.7-1.7V14c0-1 .8-1.6 1.7-1.6h.8ZM66.5 26.3c0-4.4.7-8 2.1-10.5 1.4-2.7 3.3-4 5.6-4 1.7 0 3 .6 4.2 1.7.5.5 1.6.2 1.6-.5 0-.3.3-.6.7-.6h.8c.9 0 1.6.7 1.6 1.5v26.2c0 3.7-.8 6.6-2.3 8.7a7 7 0 0 1-6 3.2 8.3 8.3 0 0 1-6.9-4.2c-.3-.4-.3-1 0-1.4.6-1 2-1 2.8-.1a5.1 5.1 0 0 0 3.8 1.7c1.7 0 3-.6 3.8-2 1-1.3 1.4-3.2 1.4-5.6 0-.7-1-1-1.5-.5a5.8 5.8 0 0 1-4 1.4c-2.3 0-4.2-1.3-5.6-4a23.6 23.6 0 0 1-2.1-11Zm3.4.6c0 3.2.4 5.7 1.3 7.6 1 1.8 2.2 2.7 3.8 2.7h.5c4.1-.4 4.2-6.3 4.2-10.5 0-4.4-.3-10.7-4.6-10.7-1.7 0-3 .9-3.9 2.7-.9 1.9-1.3 4.6-1.3 8.2ZM99.6 33.3c0-1.4-.3-2.4-1-3a8.1 8.1 0 0 0-3.6-2c-1.7-.5-3-1.1-4-1.9a7 7 0 0 1-3-6.2c0-2.4.7-4.3 2-6a6.6 6.6 0 0 1 5.3-2.4c2.2 0 4 .9 5.4 2.5a9 9 0 0 1 2 4.7c.1 1-.6 1.7-1.6 1.7s-1.6-.8-1.9-1.7c-.2-.6-.5-1.2-1-1.7-.7-1-1.7-1.5-2.9-1.5s-2.2.4-2.9 1.2c-.7.8-1 1.8-1 3s.3 2 1 2.7c.6.6 1.8 1.1 3.4 1.7 1.7.5 3 1.2 4.1 2a7 7 0 0 1 2.3 2.7c.5 1 .8 2.3.8 3.8 0 2.6-.7 4.6-2.1 6.1a7.1 7.1 0 0 1-5.5 2.3c-1.6 0-3-.4-4.2-1.2-1.2-.8-2.1-2-2.8-3.3-.5-1-.8-2-1-3 0-1 .7-1.8 1.7-1.8.9 0 1.6.8 1.8 1.7.3.9.6 1.6 1.2 2.2.8 1 2 1.5 3.3 1.5 1.3 0 2.3-.4 3-1.1a4 4 0 0 0 1.2-3Z" mask="url(#path-2-outside-1_40_7)"/>
          </g>
        </g>
        <defs>
          <filter id="symbol_d_40_7" width="105.9" height="58" x=".1" y="0" color-interpolation-filters="sRGB" filterUnits="userSpaceOnUse">
            <feFlood flood-opacity="0" result="BackgroundImageFix"/>
            <feColorMatrix in="SourceAlpha" result="hardAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"/>
            <feOffset dy="3"/>
            <feGaussianBlur stdDeviation=".5"/>
            <feComposite in2="hardAlpha" operator="out"/>
            <feColorMatrix values="0 0 0 0 0.243137 0 0 0 0 0.25098 0 0 0 0 0.262745 0 0 0 0.25 0"/>
            <feBlend in2="BackgroundImageFix" result="effect1_dropShadow_40_7"/>
            <feBlend in="SourceGraphic" in2="effect1_dropShadow_40_7" result="shape"/>
          </filter>
        </defs>
      </svg>
      <li>
        <router-link class="move" :to="{ name: 'Home'}">
          Home
        </router-link>
      </li>
      <li>
        <router-link class="move" :to="{ name: 'Myworks'}">
          Myworks
        </router-link>
      </li>
      <li>
        <router-link class="move" :to="{ name: 'About'}">
          About
        </router-link>
      </li>
      <svg class="toggle" @click="toggle(), toggledata = !toggledata"
        xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 30 30">
        <path class="toggle1" fill="#3E4043" d="M0 22.8h30V30H0z"/>
        <path class="toggle2" fill="#3E4043" d="M0 11.4h30v7.2H0z"/>
        <path class="toggle3" fill="#3E4043" d="M0 0h30v7.2H0z"/>
      </svg>
    </ul>
  </nav>
</template>

<script>
import { onMounted, ref } from 'vue'
import { gsap } from 'gsap'
import { ScrollTrigger } from 'gsap/ScrollTrigger'
gsap.registerPlugin(ScrollTrigger)

export default {
  setup () {
    // 토글이벤트
    const toggledata = ref(false)
    const toggle = () => {
      if (toggledata.value === false) {
        gsap.to('.toggle1', {
          yPercent: -158,
          ease: 'none',
          duration: 0.2
        })
        gsap.to('.toggle3', {
          yPercent: 158,
          ease: 'none',
          duration: 0.2
        }, '<')
        gsap.to('.toggle2', {
          opacity: 0,
          ease: 'none',
          duration: 0.2
        }, '<')
        gsap.to('.toggle3', {
          rotate: -45,
          transformOrigin: 'center center',
          ease: 'none',
          duration: 0.3
        }, '>')
        gsap.to('.toggle1', {
          rotate: 45,
          transformOrigin: 'center center',
          ease: 'none',
          duration: 0.3
        }, '<')
      } else if (toggledata.value === true) {
        gsap.to('.toggle1, .toggle3', {
          rotate: 0,
          transformOrigin: 'center center',
          ease: 'none',
          duration: 0.3
        })
        gsap.to('.toggle2', {
          opacity: 1,
          ease: 'none',
          duration: 0.2
        }, '>')
        gsap.to('.toggle3, .toggle1', {
          yPercent: 0,
          ease: 'none',
          duration: 0.2
        }, '<')
      }
    }

    onMounted(() => {
      // navbar
      const navUp = gsap.from('nav', {
        paused: true,
        duration: 0.5,
        background: '#3E4043',
        ease: 'none'
      }).progress(1)
      // 로고
      const symbolUp = gsap.from('.symbol', {
        paused: true,
        scale: 0.9,
        duration: 0.5,
        ease: 'none'
      }).progress(1)
      // 라우터
      const routerColor = gsap.to('a', {
        paused: true,
        color: '#3E4043',
        duration: 0.5,
        ease: 'none'
      }).progress(1)
      // 토글
      const toggleColor = gsap.from('.toggle1, .toggle2, .toggle3', {
        paused: true,
        fill: '#ffffff',
        duration: 0.5,
        ease: 'none'
      }).progress(1)

      ScrollTrigger.create({
        start: 'top top',
        end: 'bottom',
        onUpdate: (self) => {
          self.direction === -1 ? navUp.play() : navUp.reverse()
          self.direction === -1 ? symbolUp.play() : symbolUp.reverse()
          self.direction === -1 ? routerColor.play() : routerColor.reverse()
          self.direction === -1 ? toggleColor.play() : toggleColor.reverse()
        }
      })
    })
    return {
      toggledata, toggle
    }
  }
}
</script>

<style lang="scss" scoped>
a {
  color: #ffffff;
  font-weight: 600;
}
nav {
  position: fixed;
  width: 100%;
  height: 80px;
  font-size: 1em;
  ul {
    list-style: none;
    padding-left: 0;
    height: 60%;
    display: flex;
    justify-content: space-evenly;
    li {
      line-height: 40px;
      display: inline-block;
      h4 {
        margin: 0;
      }
    }
    .toggle {
      cursor: pointer;
      height: 30px;
      display: none;
    }
    @media screen and (max-width: 768px) {
      a {
        display: none;
      }
      .toggle {
        display: block;
      }
    }
  }
}
</style>
